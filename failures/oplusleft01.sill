'c <- let f : {+{a:1; b:1}} = 'd <-{ 'd.a; close 'd }; 'd <- f;
      case 'd of
      | a -> close 'c
      | b -> wait 'd;
             abort;;
